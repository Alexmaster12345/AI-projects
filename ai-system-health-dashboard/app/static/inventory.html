<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>System Trace · Inventory</title>
    <link rel="stylesheet" href="/static/assets/dashboard.css?v=20260221_3" />
    <link rel="stylesheet" href="/static/assets/inventory.css?v=20260221_5" />
    <script defer src="/static/assets/dashboard.js?v=20260221_3"></script>
    <script defer src="/static/assets/inventory.js?v=20260221_6"></script>
    <style>
    body.sidebarAutoHide:not(.sidebarHover):not(.sidebarOpen) .sidebar {
      transform: translateX(calc(-100% + 14px)) !important;
      transition: transform 180ms ease !important;
    }
    body.sidebarAutoHide.sidebarHover .sidebar,
    body.sidebarAutoHide.sidebarOpen .sidebar {
      transform: translateX(0) !important;
      transition: transform 180ms ease !important;
    }
    body.sidebarAutoHide .content {
      margin-left: 14px !important;
      transition: margin-left 180ms ease !important;
    }
    body.sidebarAutoHide.sidebarHover .content,
    body.sidebarAutoHide.sidebarOpen .content {
      margin-left: var(--side-w, 260px) !important;
    }
    </style>
    <script>
    (function() {
      let sidebarHover = false;
      function initAutoHide() {
        const sidebar = document.getElementById('sidebar');
        if (!sidebar) return;
        document.body.classList.add('sidebarAutoHide');
        document.addEventListener('mousemove', function(e) {
          if (e.clientX <= 30) {
            if (!sidebarHover) { sidebarHover = true; document.body.classList.add('sidebarHover'); }
          } else if (e.clientX > 100) {
            if (sidebarHover) { sidebarHover = false; document.body.classList.remove('sidebarHover'); }
          }
        });
        sidebar.addEventListener('mouseenter', function() { sidebarHover = true; document.body.classList.add('sidebarHover'); });
        sidebar.addEventListener('mouseleave', function() { sidebarHover = false; document.body.classList.remove('sidebarHover'); });
      }
      if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', initAutoHide); } else { initAutoHide(); }
    })();
    </script>
  </head>
  <body class="sidebarAutoHide">
    <div class="appShell" id="appShell">
      <aside class="sidebar" id="sidebar" aria-label="Navigation">
        <div class="sideTop">
          <div class="brandRow">
            <div class="brand">System Trace</div>
          </div>

          <div class="sideSearchWrap">
            <input id="sideSearch" class="sideSearch" placeholder="Search…" autocomplete="off" />
          </div>
        </div>

        <nav class="sideNav" id="sideNav" aria-label="Main">
          <div class="sideGroup">
            <div class="sideGroupTitle">Monitoring</div>
            <a class="sideItem" href="/" data-action="dashboard" data-label="Dashboard">Dashboard</a>
            <a class="sideItem" href="/overview" data-action="overview" data-label="Overview">Overview</a>
            <a class="sideItem" href="/#hosts" data-action="hosts" data-label="Hosts">Hosts</a>
            <a class="sideItem" href="/#maps" data-action="maps" data-label="Maps">Maps</a>
          </div>
          <div class="sideGroup">
            <div class="sideGroupTitle">Inventory</div>
            <a class="sideItem" href="/inventory" data-action="inventory" data-label="Inventory" aria-current="page">Inventory</a>
          </div>
          <div class="sideGroup">
            <div class="sideGroupTitle">Configuration</div>
            <a class="sideItem" href="/configuration" data-action="configuration" data-label="Configuration">Configuration</a>
          </div>
          <div class="sideGroup">
            <div class="sideGroupTitle">Administration</div>
            <a class="sideItem" href="/logs" data-action="logs" data-label="System Logs">System Logs</a>
            <a class="sideItem" href="/users" data-action="users" data-label="Users">Users</a>
            <a class="sideItem" href="/user-groups" data-action="user-groups" data-label="User groups">User groups</a>
          </div>
        </nav>

        <div class="sideBottom" aria-label="Secondary">
          <form class="sideLogout" method="post" action="/logout">
            <button class="sideItem sideBtn" type="submit" data-action="logout">Sign out</button>
          </form>
        </div>
      </aside>

      <div class="content" id="content">
        <div class="inventoryWrap">

          <!-- Page header -->
          <header class="inventoryHeader">
            <div class="invHeaderLeft">
              <div class="inventoryTitle">Inventory</div>
              <div class="inventorySub muted">Keep track of servers, racks, switches, and other equipment. Use categories + locations to stay sane when everything is black and 1U tall.</div>
            </div>
            <div class="invHeaderRight">
              <button class="invBtnSecondary" type="button" id="invRefreshBtn">↻ Refresh</button>
              <div class="inventoryBadge">
                <span class="dot"></span>
                <span id="invConn">loading…</span>
                <span class="sep">·</span>
                <span class="muted" id="invUser">—</span>
              </div>
            </div>
          </header>

          <div id="invErr" class="hostsErr" role="alert" style="display:none;"></div>

          <!-- Summary stat tiles -->
          <div class="invStatRow">
            <div class="invStatTile">
              <div class="invStatLabel">Total Items</div>
              <div class="invStatVal" id="invCount">—</div>
            </div>
            <div class="invStatTile">
              <div class="invStatLabel">Categories</div>
              <div class="invStatVal" id="invCatCount">—</div>
            </div>
            <div class="invStatTile">
              <div class="invStatLabel">Racks</div>
              <div class="invStatVal" id="invLocCount">—</div>
            </div>
            <div class="invStatTile">
              <div class="invStatLabel">Last Refresh</div>
              <div class="invStatVal invStatValSm" id="invRef">—</div>
            </div>
          </div>

          <!-- Add item form (admin only) -->
          <section class="invCard invManage" id="invManageCard" style="display:none;">
            <div class="invCardTitle">Add Item</div>
            <form id="invAddForm" class="invForm" autocomplete="off">
              <div class="invFormRow">
                <label class="invField">
                  <span class="invLabel">Name <span class="invRequired">*</span></span>
                  <input id="invName" class="invInput" type="text" list="invNameList" placeholder="e.g. Dell R740" required />
                  <datalist id="invNameList">
                    <option value="Server"></option>
                    <option value="Switch"></option>
                    <option value="PDU"></option>
                    <option value="Storage system"></option>
                    <option value="Firewall"></option>
                    <option value="UPS"></option>
                    <option value="Patch panel"></option>
                  </datalist>
                </label>
                <label class="invField">
                  <span class="invLabel">Category</span>
                  <input id="invCategory" class="invInput" type="text" list="invCategoryList" placeholder="e.g. Server" />
                  <datalist id="invCategoryList">
                    <option value="Server"></option>
                    <option value="Network"></option>
                    <option value="Storage"></option>
                    <option value="Power"></option>
                    <option value="Cooling"></option>
                    <option value="Other"></option>
                  </datalist>
                </label>
                <label class="invField">
                  <span class="invLabel">Rack</span>
                  <input id="invRack" class="invInput" type="text" list="invRackList" placeholder="e.g. Rack-A1" />
                  <datalist id="invRackList">
                    <option value="Rack-A1"></option>
                    <option value="Rack-A2"></option>
                    <option value="Rack-B1"></option>
                    <option value="Rack-B2"></option>
                  </datalist>
                </label>
                <label class="invField">
                  <span class="invLabel">Shelf / Unit</span>
                  <input id="invShelf" class="invInput" type="text" list="invShelfList" placeholder="e.g. U12" />
                  <datalist id="invShelfList">
                    <option value="U1"></option>
                    <option value="U2"></option>
                    <option value="U3"></option>
                    <option value="U4"></option>
                    <option value="U6"></option>
                    <option value="U8"></option>
                    <option value="U10"></option>
                    <option value="U12"></option>
                    <option value="U14"></option>
                    <option value="Shelf 1"></option>
                    <option value="Shelf 2"></option>
                    <option value="Shelf 3"></option>
                  </datalist>
                </label>
                <label class="invField invFieldQty">
                  <span class="invLabel">Qty</span>
                  <input id="invQty" class="invInput" type="number" min="0" step="1" value="1" />
                </label>
              </div>
              <div class="invFormRow">
                <label class="invField">
                  <span class="invLabel">S/N</span>
                  <input id="invSerial" class="invInput" type="text" placeholder="e.g. SN-123456" />
                </label>
                <label class="invField invFieldNotes">
                  <span class="invLabel">Notes</span>
                  <input id="invNotes" class="invInput" type="text" placeholder="Owner, warranty expiry, etc." />
                </label>
                <div class="invFormActions">
                  <button class="invBtnPrimary" type="submit" id="invAddBtn">+ Add Item</button>
                </div>
              </div>
            </form>
          </section>

          <!-- Items table -->
          <section class="invCard invList">
            <div class="invCardHeader">
              <div class="invCardTitle">Items</div>
              <input id="invSearch" class="invSearch" type="text" placeholder="Search name, category, location…" autocomplete="off" />
            </div>
            <div class="invTableWrap">
              <table class="invTable" aria-label="Inventory items">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Rack</th>
                    <th>Shelf</th>
                    <th class="qty">Qty</th>
                    <th>S/N</th>
                    <th>Notes</th>
                    <th class="act" id="invActHead" style="display:none;">Actions</th>
                  </tr>
                </thead>
                <tbody id="invTbody">
                  <tr><td colspan="5" class="invEmpty muted">Loading…</td></tr>
                </tbody>
              </table>
            </div>
          </section>

        </div>
      </div>
    </div>
  </body>
</html>
