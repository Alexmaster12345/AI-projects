<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VM-Switch Manager</title>
  <link rel="stylesheet" href="/static/css/style.css" />
</head>
<body>
<!-- ===== SIDEBAR ===== -->
<aside class="sidebar" id="sidebar">
  <div class="sidebar-logo">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
      <rect x="2" y="6" width="20" height="12" rx="2"/>
      <circle cx="6"  cy="12" r="1.2" fill="currentColor"/>
      <circle cx="9"  cy="12" r="1.2" fill="currentColor"/>
      <circle cx="12" cy="12" r="1.2" fill="currentColor"/>
      <circle cx="15" cy="12" r="1.2" fill="currentColor"/>
      <circle cx="18" cy="12" r="1.2" fill="currentColor"/>
    </svg>
    <span>VM-Switch</span>
  </div>
  <nav class="sidebar-nav">
    <a class="nav-item active" data-tab="dashboard" onclick="switchTab('dashboard',this)">
      <svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
      Dashboard
    </a>
    <a class="nav-item" data-tab="ports" onclick="switchTab('ports',this)">
      <svg viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
      Ports
    </a>
    <a class="nav-item" data-tab="vlans" onclick="switchTab('vlans',this)">
      <svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
      VLANs
    </a>
    <a class="nav-item" data-tab="routing" onclick="switchTab('routing',this)">
      <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
      Routing
    </a>
    <a class="nav-item" data-tab="mac" onclick="switchTab('mac',this)">
      <svg viewBox="0 0 24 24"><path d="M4 7h16M4 12h16M4 17h10"/></svg>
      MAC Table
    </a>
    <a class="nav-item" data-tab="stp" onclick="switchTab('stp',this)">
      <svg viewBox="0 0 24 24"><circle cx="12" cy="5" r="2"/><circle cx="5" cy="19" r="2"/><circle cx="19" cy="19" r="2"/><path d="M12 7v4M12 11l-7 6M12 11l7 6"/></svg>
      Spanning Tree
    </a>
    <a class="nav-item" data-tab="cli" onclick="switchTab('cli',this)">
      <svg viewBox="0 0 24 24"><polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/></svg>
      CLI
    </a>
  </nav>
  <div class="sidebar-footer">
    <span id="sb-uptime">Uptime: —</span>
  </div>
</aside>

<!-- ===== MAIN ===== -->
<div class="main">
  <header class="topbar">
    <div class="topbar-title" id="tabTitle">Dashboard</div>
    <div class="topbar-right">
      <span class="badge badge-green" id="hdr-ports-up">— up</span>
      <span class="badge badge-red"   id="hdr-ports-down">— down</span>
      <span class="topbar-hostname"   id="hdr-hostname">SW1</span>
      <button class="btn btn-ghost" onclick="refreshAll()">
        <svg viewBox="0 0 24 24"><path d="M23 4v6h-6M1 20v-6h6"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
        Refresh
      </button>
    </div>
  </header>

  <!-- ===== DASHBOARD ===== -->
  <div class="tab-content active" id="tab-dashboard">
    <div class="stat-grid">
      <div class="stat-card">
        <div class="stat-icon green"><svg viewBox="0 0 24 24"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></div>
        <div>
          <div class="stat-value" id="stat-up">—</div>
          <div class="stat-label">Ports Up</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon red"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg></div>
        <div>
          <div class="stat-value" id="stat-down">—</div>
          <div class="stat-label">Ports Down</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon blue"><svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5z"/></svg></div>
        <div>
          <div class="stat-value" id="stat-vlans">—</div>
          <div class="stat-label">VLANs</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon purple"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div>
        <div>
          <div class="stat-value" id="stat-uptime">—</div>
          <div class="stat-label">Uptime</div>
        </div>
      </div>
    </div>

    <div class="section-title">Port Panel</div>
    <div class="port-panel" id="port-panel"></div>

    <div class="two-col">
      <div class="card">
        <div class="card-header">Recent MAC Entries</div>
        <table class="data-table" id="dash-mac-table">
          <thead><tr><th>VLAN</th><th>MAC</th><th>Port</th><th>Type</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="card">
        <div class="card-header">Switch Info</div>
        <table class="data-table" id="info-table">
          <tbody>
            <tr><td>Hostname</td><td id="info-hostname">—</td></tr>
            <tr><td>Model</td><td id="info-model">—</td></tr>
            <tr><td>STP Mode</td><td id="info-stp">—</td></tr>
            <tr><td>Time</td><td id="info-time">—</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ===== PORTS ===== -->
  <div class="tab-content" id="tab-ports">
    <div class="card">
      <div class="card-header">
        Port Configuration
        <span class="card-hint">Click a row to edit</span>
      </div>
      <table class="data-table" id="ports-table">
        <thead><tr><th>Port</th><th>Status</th><th>Admin</th><th>Mode</th><th>VLAN</th><th>Speed</th><th>Description</th><th>Actions</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <!-- Edit panel -->
    <div class="card" id="port-edit-panel" style="display:none">
      <div class="card-header">Edit Port: <span id="edit-port-id"></span></div>
      <div class="form-grid">
        <label>Description<input id="ep-desc" type="text" class="input" /></label>
        <label>Admin State
          <select id="ep-admin" class="input">
            <option value="up">Up</option>
            <option value="down">Down (shutdown)</option>
          </select>
        </label>
        <label>Mode
          <select id="ep-mode" class="input">
            <option value="access">Access</option>
            <option value="trunk">Trunk</option>
          </select>
        </label>
        <label>Access VLAN<input id="ep-vlan" type="number" class="input" min="1" max="4094" /></label>
        <label>Speed
          <select id="ep-speed" class="input">
            <option value="10">10 Mbps</option>
            <option value="100">100 Mbps</option>
            <option value="1000">1 Gbps</option>
            <option value="auto">Auto</option>
          </select>
        </label>
        <label>Duplex
          <select id="ep-duplex" class="input">
            <option value="full">Full</option>
            <option value="half">Half</option>
            <option value="auto">Auto</option>
          </select>
        </label>
      </div>
      <div class="form-actions">
        <button class="btn btn-primary" onclick="savePort()">Apply</button>
        <button class="btn btn-ghost" onclick="closePortEdit()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- ===== VLANs ===== -->
  <div class="tab-content" id="tab-vlans">
    <div class="card">
      <div class="card-header">
        VLAN Database
        <button class="btn btn-primary btn-sm" onclick="showVlanCreate()">+ New VLAN</button>
      </div>
      <table class="data-table" id="vlan-table">
        <thead><tr><th>ID</th><th>Name</th><th>Status</th><th>Ports</th><th>Actions</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="card" id="vlan-create-panel" style="display:none">
      <div class="card-header">Create VLAN</div>
      <div class="form-grid">
        <label>VLAN ID<input id="new-vlan-id" type="number" class="input" min="2" max="4094" /></label>
        <label>Name<input id="new-vlan-name" type="text" class="input" /></label>
      </div>
      <div class="form-actions">
        <button class="btn btn-primary" onclick="createVlan()">Create</button>
        <button class="btn btn-ghost" onclick="document.getElementById('vlan-create-panel').style.display='none'">Cancel</button>
      </div>
    </div>
  </div>

  <!-- ===== ROUTING ===== -->
  <div class="tab-content" id="tab-routing">
    <div class="card">
      <div class="card-header">Layer 3 Interfaces (SVI)</div>
      <table class="data-table" id="routing-table">
        <thead><tr><th>Interface</th><th>IP Address</th><th>Subnet Mask</th><th>Status</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- ===== MAC TABLE ===== -->
  <div class="tab-content" id="tab-mac">
    <div class="card">
      <div class="card-header">
        MAC Address Table
        <button class="btn btn-danger btn-sm" onclick="clearMac()">Clear Dynamic</button>
      </div>
      <table class="data-table" id="mac-table-full">
        <thead><tr><th>VLAN</th><th>MAC Address</th><th>Type</th><th>Port</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- ===== SPANNING TREE ===== -->
  <div class="tab-content" id="tab-stp">
    <div class="card">
      <div class="card-header">Spanning Tree Protocol</div>
      <table class="data-table">
        <tbody id="stp-info"></tbody>
      </table>
    </div>
  </div>

  <!-- ===== CLI ===== -->
  <div class="tab-content cli-tab" id="tab-cli">
    <div class="cli-wrap">
      <div class="cli-output" id="cli-output"></div>
      <div class="cli-input-row">
        <span class="cli-prompt" id="cli-prompt">SW1></span>
        <input class="cli-input" id="cli-input" type="text"
               autocomplete="off" autocorrect="off" spellcheck="false"
               placeholder="type a command…" />
      </div>
    </div>
    <div class="cli-hints">
      <span>Quick commands:</span>
      <button class="pill" onclick="cliQuick('show version')">show version</button>
      <button class="pill" onclick="cliQuick('show interfaces')">show interfaces</button>
      <button class="pill" onclick="cliQuick('show vlan')">show vlan</button>
      <button class="pill" onclick="cliQuick('show mac-address-table')">show mac-address-table</button>
      <button class="pill" onclick="cliQuick('show spanning-tree')">show spanning-tree</button>
      <button class="pill" onclick="cliQuick('show running-config')">show running-config</button>
      <button class="pill" onclick="cliQuick('enable')">enable</button>
      <button class="pill" onclick="cliQuick('configure terminal')">configure terminal</button>
    </div>
  </div>
</div>

<script src="/static/js/app.js"></script>
</body>
</html>
