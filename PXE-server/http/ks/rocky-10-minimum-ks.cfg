# =============================================================================
# Kickstart file — Rocky Linux 10 Minimal Automated Install
# Served at: http://192.168.50.225/ks/rocky-10-minimum-ks.cfg
# Default credentials: root / rocky123  |  admin / rocky123
# =============================================================================

# Installation method
url --url="http://192.168.50.225/rocky-10-minimum"

# Language and locale
lang en_US.UTF-8
keyboard us
timezone UTC --utc

# Network (DHCP during install)
network --bootproto=dhcp --device=link --activate --onboot=yes

# Security
firewall --enabled --service=ssh
selinux --enforcing

# Root password: rocky123
rootpw --iscrypted $6$suR5i6VWaZFwM5VV$CRxY9S7CjPowFDC6dyqD/bjWp/mwA0uq8K5n2AUsniIvDUV57hFhrOx3T8plGsEms8Ut31Q/85DOJrlfwOmQ50

# Admin user: admin / rocky123
user --name=admin --groups=wheel --iscrypted --password=$6$suR5i6VWaZFwM5VV$CRxY9S7CjPowFDC6dyqD/bjWp/mwA0uq8K5n2AUsniIvDUV57hFhrOx3T8plGsEms8Ut31Q/85DOJrlfwOmQ50

# Boot loader
bootloader --location=mbr

# Disk partitioning — wipe first disk automatically
ignoredisk --only-use=sda
clearpart --all --drives=sda --initlabel
autopart --type=lvm

# Text mode install
text
skipx

# Power off after install — then change VM boot order to disk
poweroff

# Minimal packages only — NO dnf update (saves 5-10 minutes)
%packages --ignoremissing
@^minimal-environment
openssh-server
vim
curl
wget
tar
%end

# Post-install
%post --log=/root/ks-post.log
systemctl enable sshd
echo "Rocky Linux 10 PXE install complete." >> /root/ks-post.log
%end
