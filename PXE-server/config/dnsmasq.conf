# =============================================================================
# dnsmasq.conf — PXE Boot Server Configuration
# =============================================================================
# Serves DHCP + TFTP for PXE booting on your LAN.
# Edit the variables marked with [EDIT] for your network.
# =============================================================================

# --- Interface ---
# [EDIT] Set to your LAN-facing interface (e.g. eth0, ens18, enp3s0)
interface=eth0
bind-interfaces

# --- DHCP Range ---
# [EDIT] Adjust to match your subnet. Format: start,end,mask,lease-time
dhcp-range=192.168.1.100,192.168.1.200,255.255.255.0,12h

# --- Gateway and DNS ---
# [EDIT] Set to your router IP
dhcp-option=3,192.168.1.1
# [EDIT] DNS servers (8.8.8.8 = Google, or use your router IP)
dhcp-option=6,8.8.8.8,8.8.4.4

# --- TFTP Server ---
enable-tftp
# [EDIT] Path to tftpboot directory (must match setup.sh TFTP_ROOT)
tftp-root=/var/lib/tftpboot

# --- PXE Boot ---
# For BIOS clients → pxelinux.0
dhcp-boot=pxelinux.0

# For UEFI clients → grubx64.efi
# Uncomment the lines below to support UEFI alongside BIOS (requires grub2-efi files)
# dhcp-match=set:efi-x86_64,option:client-arch,7
# dhcp-boot=tag:efi-x86_64,grubx64.efi

# --- Logging ---
log-dhcp
log-queries
log-facility=/var/log/dnsmasq-pxe.log

# --- Do NOT act as upstream DNS forwarder ---
port=0
